---
title: 'ğŸ MacBook Air M3 ã‚’è³¼å…¥ã—ã¦ã™ãæ§‹ç¯‰ã§ãã‚‹ä»®æƒ³ç’°å¢ƒ'
topics: ['6_test']
authors:
    - tokunaga
description: 'Start Strong with Docker'
pubDate: 'May 28 2024'
heroImage: '/img/cat.jpg'
---

## çµŒç·¯

ä»•äº‹ã§ã‚‚è‡ªå®…ã§ã‚‚Windows ãƒ¦ãƒ¼ã‚¶ã ã£ãŸã®ã§ã™ãŒï¼ŒiOSã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ãŸãï¼Œå¦»ã«å®¶åº­å†…ç¨Ÿè­°ã‚’ã‚ã’ã¦ã¿ãŸã¨ã“ã‚2é€±é–“ã»ã©ã§è¨±å¯ãŒé™ã‚Šã¾ã—ãŸï¼
ã¨ã„ã†ã‚ã‘ã§ç¾åœ¨ã®Win 11 ã®é–‹ç™ºç’°å¢ƒã‚’Mac ã§ã‚‚ã§ãã‚‹ã ã‘ç¶™ç¶šã—ã¦åˆ©ç”¨ã™ã‚‹ãŸã‚ã®Docker è¨­å®šã‚’ã¾ã¨ã‚ã¾ã™ï¼

åƒ•ã®Windows æ©ŸãŒã‚ˆããƒ•ãƒªãƒ¼ã‚ºã—ã¦ãã®ã¾ã¾æ•°æ—¥èµ·å‹•ã—ãªããªã‚‹ã“ã¨ãŒå¤šã„ã®ã§ï¼Œå†ç¾æ€§ã®ã‚ã‚‹ç’°å¢ƒæ§‹ç¯‰ã‚’ï¼Œã¨ã„ã†ç‹™ã„ã§Docker ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ï¼

## ã‚¿ãƒ¼ãƒŸãƒŠãƒ«

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¢ãƒã§ã¯ãªãï¼Œ[Starship](https://starship.rs/ja-JP/guide/#%F0%9F%9A%80-%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)ã‚’åˆ©ç”¨ã—ã¾ã™ï¼
Rust è£½ã¨ã„ã†ã¨ã“ã‚ãŒæ°—ã«å…¥ã£ã¦ã„ã‚‹ã ã‘ã§ã™ãŒï¼Œãªã‹ãªã‹ç›®ã«å„ªã—ã„ã§ã™ï¼
Starship ã§ã¯ [Nerd Font](https://www.nerdfonts.com/font-downloads)ãŒå¿…è¦ã§ã™ï¼

Starship ã¨ Nerd Font ã¯Docker ã§ã¯ãªãLocal ã«ç›´ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ï¼

## ã‚¨ãƒ‡ã‚£ã‚¿

[VS Code](https://www.nerdfonts.com/font-downloads)ä¸€æŠã§ã™ï¼
DevContainerç’°å¢ƒã‚’ä½¿ã†ãŸã‚ã§ã™ï¼

## git

DevContainer ç’°å¢ƒã¯éå¸¸ã«ä¾¿åˆ©ã§ï¼Œãƒ›ã‚¹ãƒˆOS ã®`~/.gitconfig`ã¯è‡ªå‹•çš„ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ï¼
SSH ç§˜å¯†éµã‚‚ã„ã„æ„Ÿã˜ã«ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§git ã‚’è¨­å®šã—ã¦ãŠã‘ã°Dockerfile ã‚’ã„ã˜ã‚ŠãŸãŠã™å¿…è¦ãŒãªããªã‚Šã¾ã™ï¼

- [Git](https://git-scm.com/downloads)

## é–‹ç™ºç’°å¢ƒ

Rust ã‚„ Javaï¼ŒNode.js ãªã©ã§ã¯ãã‚Œãã‚Œé–‹ç™ºã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ç¾¤ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè‰²ã€…å¿…è¦ãªã®ã§ã™ãŒï¼Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç•°ãªã‚‹ç’°å¢ƒæ§‹ç¯‰ã‚’ã™ã¹ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã«å…¥ã‚Œã¦ã„ãã¨å®¹é‡ã‚’é€¼è¿«ã™ã‚‹ãŠãã‚ŒãŒã‚ã‚Šã¾ã™ï¼
ã¨ã„ã†ã‚ã‘ã§[Docker](https://www.nerdfonts.com/font-downloads) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

Dockerfile ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ã¾ã¡ã¾ã¡ã§ã™ãŒï¼Œã“ã“ã§ã¯`Svelte`ç‰ˆã‚’è¨˜ã—ã¦ãŠãã¾ã™ï¼

### æ§‹æˆ

`node_modules`ã‚’ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§åŒæœŸã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ä»¥å¤–ã¯ç‰¹è¨˜ã™ã¹ãã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ï¼

```json title=".devcontainer/devcontainer.json"
// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/ubuntu
{
	"name": "Grin",
	"build": {
		"dockerfile": "Dockerfile"
	},
	"workspaceFolder": "/workspace",
	"workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
	"mounts": [
    "source=${localWorkspaceFolderBasename}_node_modules,target=${containerWorkspaceFolder}/node_modules,type=volume"
	],

	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	"forwardPorts": [5173],

	// Use 'postCreateCommand' to run commands after the container is created.
	"postCreateCommand": ".devcontainer/getting_ready.sh",

	// Configure tool-specific properties.
	"customizations": {
		"vscode": {
			"extensions": [
				//ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿
				"esbenp.prettier-vscode",
				//rust
				"rust-lang.rust-analyzer",
				"serayuzgur.crates",
				"tamasfe.even-better-toml",
				//ãƒªãƒ³ã‚¿
				"dbaeumer.vscode-eslint",
				//å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã®æ¤œçŸ¥
				"saikou9901.evilinspector",
				//git
				"mhutchie.git-graph",
				//github actions
				"github.vscode-github-actions",
				//csv
				"mechatroner.rainbow-csv",
				//æ­£è¦è¡¨ç¾
				"lextudio.restructuredtext",
				//svelte
				"svelte.svelte-vscode",
				//unit test
				"vitest.explorer",
				//integration test
				"ms-playwright.playwright",
				//icons
				"vscode-icons-team.vscode-icons",
				//css
				"chakra-ui.panda-css-vscode"
			],
			"settings": {
				"workbench.iconTheme": "vscode-icons",
				"files.encoding": "utf8",
				"files.eol": "\n",
				"editor.defaultFormatter": "esbenp.prettier-vscode",
				"[javascript]": {
					"editor.defaultFormatter": "esbenp.prettier-vscode"
				},
				"workbench.colorTheme": "Tokyo Night Storm",
  			"terminal.integrated.fontFamily": "'BigBlueTerm437 Nerd Font'",
  			"editor.fontSize": 12
			}
		}
	},

	"remoteUser": "hoe"
}
```

### Dockerfile

éroot ãƒ¦ãƒ¼ã‚¶ã‚’ã¤ãã‚‹ãã‚‰ã„ã—ã‹ã‚„ã£ã¦ã„ã¾ã›ã‚“ï¼
`Linux OS`ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å®šç¾©ã™ã‚‹ï¼Œã®å½¹å‰²ã«ç•™ã‚ã¦ã„ã¾ã™ï¼Œ
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ä½œæ¥­ã®è‡ªå‹•åŒ–ã«è¿‘ã„ç¯„ç–‡ã§ã™ã®ã§ï¼Œå…ˆã»ã©ã®`postCreateCommand`ã«è­²ã‚Šã¾ã™ï¼

```dockerfile title="Dockerfile"
# syntax=docker/dockerfile:1
FROM mcr.microsoft.com/vscode/devcontainers/typescript-node:bookworm
# Environment variables
ENV USER hoe
ENV HOME /home/$USER
# Build arguments
ARG USER_UID=1049894
ARG USER_GID=$USER_UID

RUN apt update && apt install -y sudo

# Creation of non-root user with sudo
RUN groupadd --gid $USER_GID $USER \
    && useradd --uid $USER_UID --gid $USER_GID -m $USER \
    && echo $USER ALL=\(root\) NOPASSWD:ALL > /etc/sudoers.d/$USER \
    && chmod 0440 /etc/sudoers.d/$USER

USER $USER

WORKDIR $HOME
```

## ãƒ“ãƒ«ãƒ‰å¾Œã«èµ·å‹•ã™ã‚‹ã‚·ã‚§ãƒ«

ã“ã“ã¯é–‹ç™ºè€…ã«ã‚ˆã£ã¦ã¯ç„¡ãã¦ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ï¼
ç‰¹ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®éƒ¨åˆ†ã¯ãƒãƒ¼ãƒ é–‹ç™ºã®å ´åˆé‚ªé­”ãªã®ã§ã™ãŒï¼Œã„ã¾ã¯å€‹äººé–‹ç™ºã—ã‹ã—ã¦ã„ã¾ã›ã‚“ï¼

```sh title="getting_ready.sh"
#!/bin/bash

# Install necessary packages
sudo apt update
sudo apt -y install fish exa ripgrep fzf git

# Install fisher
curl https://git.io/fisher --create-dirs -sLo ~/.config/fish/functions/fisher.fish
# shell theme
fish -c "fisher install oh-my-fish/theme-bobthefish"
# z(alt cd)
fish -c "fisher install jethrokuan/z"
# Install starship
curl -sS https://starship.rs/install.sh | sh -s -- -y
# Set up aliases and configurations in Fish shell
echo "# Shell Operations" >> ~/.config/fish/config.fish
echo "alias l='exa --color auto --icons'" >> ~/.config/fish/config.fish
echo "alias la='exa -la --color auto --icons'" >> ~/.config/fish/config.fish
echo "alias ll='exa -l --color auto --icons'" >> ~/.config/fish/config.fish
echo "alias tree='exa -T -L 3 --color auto --icons'" >> ~/.config/fish/config.fish
echo "alias grep='rg'" >> ~/.config/fish/config.fish
echo "alias g='git'" >> ~/.config/fish/config.fish
echo "set -g theme_color_scheme dracula" >> ~/.config/fish/config.fish
echo "starship init fish | source" >> ~/.config/fish/config.fish
starship preset pastel-powerline -o ~/.config/starship.toml

# Set up git aliases globally
git config --global alias.a add
git config --global alias.c commit
git config --global alias.p push
git config --global alias.st status
git config --global alias.gr "log --graph --date=short --decorate=short --pretty=format:'%Cgreen%h %Creset%cd %Cblue%cn %Cred%d %Creset%s'"
git config --global alias.empty "commit --allow-empty -m 'Initial commit'"
git config --global alias.ch checkout
git config --global init.defaultBranch main
git config --global --add safe.directory /workspace

# Save Fish shell functions
fish -c "funcsave fish_config"

# Change default shell to Fish
sudo chsh -s $(which fish)

sudo chown hoe node_modules
```

ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¿ã‘ã¦ã„ã‚‹ã®ã‹å¥½ã¿ãªã®ã‹ãƒãƒƒã‚­ãƒªã‚ã‹ã‚Šã¾ã›ã‚“ãŒï¼Œå¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç³»ã¯Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã‚ãšï¼Œãƒ“ãƒ«ãƒ‰å¾Œã®ã‚·ã‚§ãƒ«ã§è³„ã£ã¦ã„ã¾ã™ã€‚
Dockerfile ã¯ã§ãã‚‹ã ã‘ç°¡æ½”ã«ã—ãŸã„æ°—æŒã¡ãŒã‚ã‚Šã¾ã™ï¼
